{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block extrahead %}
    {{ block.super }}
    <style>
        .admin-object-tools {
            margin-bottom: 20px;
        }
        .button-editar {
            background-color: #007cba;
            color: white;
            padding: 8px 12px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
            display: inline-block;
        }
        .button-editar:hover {
            background-color: #005a87;
            color: white;
        }
        .result-list tr:hover {
            background-color: #f5f5f5;
            cursor: pointer;
        }
        .field-plato_link a {
            font-weight: bold;
            color: #007cba;
            text-decoration: none;
        }
        .field-plato_link a:hover {
            color: #005a87;
            text-decoration: underline;
        }
        .object-tools {
            margin-bottom: 20px;
        }
        .addlink {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
        }
        .addlink:before {
            content: "âž• ";
        }
    </style>
{% endblock %}

{% block result_list %}
    {{ block.super }}
    <script>
    (function($) {
        $(document).ready(function() {
            console.log('âœ… Lista de disponibilidades cargada');
            
            // Hacer toda la fila clickeable para editar
            $('.result-list tbody tr').each(function() {
                var $row = $(this);
                var editLink = $row.find('.field-editar_link a').attr('href');
                
                if (editLink) {
                    $row.css('cursor', 'pointer');
                    
                    // Agregar evento click a toda la fila
                    $row.on('click', function(e) {
                        // Si no se hizo click en un enlace especÃ­fico
                        if (!$(e.target).is('a')) {
                            window.location.href = editLink;
                        }
                    });
                    
                    // Resaltar fila al pasar el mouse
                    $row.on('mouseenter', function() {
                        $(this).css('background-color', '#e8f4fd');
                    }).on('mouseleave', function() {
                        $(this).css('background-color', '');
                    });
                }
            });
            
            console.log('âœ… Eventos de click configurados para', $('.result-list tbody tr').length, 'filas');
        });
    })(django.jQuery);
    </script>
{% endblock %}

{% block object-tools-items %}
    <li>
        <a href="{% url 'admin:myapp_disponibilidadplato_add' %}" class="addlink">
            Agregar Disponibilidad de Plato
        </a>
    </li>
    <li>
        <a href="{% url 'admin:myapp_plato_changelist' %}" class="viewlink">
            ðŸ“‹ Ver Platos
        </a>
    </li>
{% endblock %}