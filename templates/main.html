{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Men√∫ Semanal | Familia Gastro</title>
  <link rel="icon" type="image/png" href="{% static 'img/logo.flg.png' %}">
  
  <!-- Fuentes modernas -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="{% static 'styles.css' %}">
  
  <style>
    /* =================================== 
       CSS Variables Corporativas
       =================================== */
    :root {
      --color-primary: #b71c1c;
      --color-primary-dark: #8d1313;
      --color-primary-light: #d32f2f;
      --color-secondary: #4d1515;
      --color-accent: #ff6b6b;
      
      --color-white: #ffffff;
      --color-black: #000000;
      --color-gray-50: #f9fafb;
      --color-gray-100: #f3f4f6;
      --color-gray-200: #e5e7eb;
      --color-gray-300: #d1d5db;
      --color-gray-400: #9ca3af;
      --color-gray-500: #6b7280;
      --color-gray-600: #4b5563;
      --color-gray-700: #374151;
      --color-gray-800: #1f2937;
      --color-gray-900: #111827;
      
      --font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --font-size-xs: 0.75rem;
      --font-size-sm: 0.875rem;
      --font-size-base: 1rem;
      --font-size-lg: 1.125rem;
      --font-size-xl: 1.25rem;
      --font-size-2xl: 1.5rem;
      --font-size-3xl: 1.875rem;
      --font-size-4xl: 2.25rem;
      --font-size-5xl: 3rem;
      
      --spacing-1: 0.25rem;
      --spacing-2: 0.5rem;
      --spacing-3: 0.75rem;
      --spacing-4: 1rem;
      --spacing-5: 1.25rem;
      --spacing-6: 1.5rem;
      --spacing-8: 2rem;
      --spacing-10: 2.5rem;
      --spacing-12: 3rem;
      --spacing-16: 4rem;
      
      --radius-sm: 0.375rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
      --radius-2xl: 1.5rem;
      
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      
      --transition-fast: 150ms ease-in-out;
      --transition-normal: 250ms ease-in-out;
    }

    /* =================================== 
       Global Styles & Box Model Fix
       =================================== */
    *,
    *::before,
    *::after {
      box-sizing: border-box !important;
    }

    html {
      font-size: 16px;
      line-height: 1.15;
      -webkit-text-size-adjust: 100%;
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-family);
      background: linear-gradient(135deg, var(--color-gray-50) 0%, var(--color-gray-100) 100%);
      color: var(--color-gray-800);
      margin: 0 !important;
      padding: 0 !important;
      box-sizing: border-box !important;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* =================================== 
       Header Responsive
       =================================== */
    .navbar {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
      box-shadow: var(--shadow-lg);
      padding: var(--spacing-4) 0;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      min-height: 70px;
      box-sizing: border-box !important;
    }

    .navbar-brand {
      font-weight: 700;
      font-size: var(--font-size-2xl);
      color: var(--color-white) !important;
      text-decoration: none !important;
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
    }

    .navbar-nav .nav-link {
      color: var(--color-white) !important;
      font-weight: 500;
      padding: var(--spacing-2) var(--spacing-4) !important;
      border-radius: var(--radius-md);
      transition: var(--transition-fast);
      margin: 0 var(--spacing-1);
    }

    .navbar-nav .nav-link:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-1px);
    }

    /* =================================== 
       Main Content Container
       =================================== */
    .main-container {
      margin-top: 70px;
      padding: var(--spacing-8) 0;
      min-height: calc(100vh - 70px);
      box-sizing: border-box !important;
    }

    .container-fluid {
      padding-right: var(--spacing-4);
      padding-left: var(--spacing-4);
      box-sizing: border-box !important;
    }

    /* =================================== 
       Hero Section
       =================================== */
    .hero-section {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
      color: var(--color-white);
      padding: var(--spacing-16) 0 var(--spacing-12) 0;
      margin-bottom: var(--spacing-12);
      position: relative;
      overflow: hidden;
      border-radius: 0 0 var(--radius-2xl) var(--radius-2xl);
      box-sizing: border-box !important;
    }

    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
      box-sizing: border-box !important;
    }

    .hero-title {
      font-size: var(--font-size-5xl);
      font-weight: 800;
      margin-bottom: var(--spacing-6);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: var(--font-size-xl);
      opacity: 0.9;
      margin-bottom: var(--spacing-8);
      font-weight: 400;
    }

    /* =================================== 
       Section Titles
       =================================== */
    .section-title {
      position: relative;
      display: inline-block;
      font-size: var(--font-size-3xl);
      font-weight: 700;
      color: var(--color-primary);
      margin-bottom: var(--spacing-8);
      padding-bottom: var(--spacing-3);
      border-bottom: 3px solid var(--color-primary);
    }

    .section-subtitle {
      font-size: var(--font-size-lg);
      color: var(--color-gray-600);
      margin-bottom: var(--spacing-8);
      text-align: center;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* =================================== 
       Dish Containers - Responsive Grid
       =================================== */
    .dishes-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-8);
      margin-bottom: var(--spacing-12);
      box-sizing: border-box !important;
    }

    .dish-container {
      background: var(--color-white);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      transition: var(--transition-normal);
      border: 1px solid var(--color-gray-200);
      box-sizing: border-box !important;
    }

    .dish-container:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
    }

    .dish-header {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
      color: var(--color-white);
      padding: var(--spacing-6);
      text-align: center;
      position: relative;
      box-sizing: border-box !important;
    }

    .dish-header h3 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin: 0;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .dish-header .icon {
      font-size: var(--font-size-4xl);
      margin-bottom: var(--spacing-3);
      opacity: 0.9;
    }

    .dish-content {
      padding: var(--spacing-6);
      box-sizing: border-box !important;
    }

    /* =================================== 
       Dish Cards - Responsive
       =================================== */
    .dish-cards-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--spacing-4);
      box-sizing: border-box !important;
    }

    .dish-card {
      background: var(--color-gray-50);
      border-radius: var(--radius-lg);
      padding: var(--spacing-5);
      border: 1px solid var(--color-gray-200);
      transition: var(--transition-fast);
      box-sizing: border-box !important;
      position: relative;
      overflow: hidden;
    }

    .dish-card:hover {
      background: var(--color-white);
      border-color: var(--color-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .dish-image {
      width: 80px;
      height: 80px;
      border-radius: var(--radius-lg);
      object-fit: cover;
      margin-bottom: var(--spacing-3);
      box-shadow: var(--shadow-sm);
      float: right;
      margin-left: var(--spacing-4);
    }

    .dish-name {
      font-size: var(--font-size-lg);
      font-weight: 600;
      color: var(--color-gray-800);
      margin-bottom: var(--spacing-2);
      line-height: 1.3;
    }

    .dish-description {
      font-size: var(--font-size-sm);
      color: var(--color-gray-600);
      margin-bottom: var(--spacing-3);
      line-height: 1.5;
    }

    .dish-price {
      font-size: var(--font-size-xl);
      font-weight: 700;
      color: var(--color-primary);
      margin-bottom: var(--spacing-3);
    }

    .dish-day {
      display: inline-block;
      background: var(--color-primary);
      color: var(--color-white);
      padding: var(--spacing-1) var(--spacing-3);
      border-radius: var(--radius-md);
      font-size: var(--font-size-xs);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* =================================== 
       Action Buttons
       =================================== */
    .btn-primary-custom {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
      border: none;
      color: var(--color-white);
      padding: var(--spacing-3) var(--spacing-6);
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: var(--font-size-sm);
      transition: var(--transition-fast);
      box-shadow: var(--shadow-sm);
      text-decoration: none !important;
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      min-height: 44px;
      justify-content: center;
      box-sizing: border-box !important;
    }

    .btn-primary-custom:hover {
      background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
      color: var(--color-white) !important;
    }

    .btn-secondary-custom {
      background: var(--color-white);
      border: 2px solid var(--color-primary);
      color: var(--color-primary);
      padding: var(--spacing-3) var(--spacing-6);
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: var(--font-size-sm);
      transition: var(--transition-fast);
      text-decoration: none !important;
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      min-height: 44px;
      justify-content: center;
      box-sizing: border-box !important;
    }

    .btn-secondary-custom:hover {
      background: var(--color-primary);
      color: var(--color-white) !important;
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    /* =================================== 
       Cart Section
       =================================== */
    .cart-section {
      background: var(--color-white);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      padding: var(--spacing-8);
      margin-bottom: var(--spacing-12);
      border: 1px solid var(--color-gray-200);
      box-sizing: border-box !important;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-4);
      border-bottom: 1px solid var(--color-gray-200);
      transition: var(--transition-fast);
      box-sizing: border-box !important;
    }

    .cart-item:hover {
      background: var(--color-gray-50);
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-total {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
      color: var(--color-white);
      padding: var(--spacing-5);
      border-radius: var(--radius-lg);
      text-align: center;
      margin-top: var(--spacing-6);
      box-sizing: border-box !important;
    }

    .cart-total h4 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin: 0;
    }

    /* =================================== 
       Footer
       =================================== */
    .footer {
      background: linear-gradient(135deg, var(--color-gray-800) 0%, var(--color-gray-900) 100%);
      color: var(--color-white);
      padding: var(--spacing-12) 0 var(--spacing-8) 0;
      margin-top: var(--spacing-16);
      box-sizing: border-box !important;
    }

    .footer-content {
      text-align: center;
      max-width: 600px;
      margin: 0 auto;
    }

    .footer h4 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--spacing-4);
      color: var(--color-white);
    }

    .footer p {
      font-size: var(--font-size-base);
      opacity: 0.8;
      margin-bottom: var(--spacing-6);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: var(--spacing-6);
      flex-wrap: wrap;
      margin-bottom: var(--spacing-6);
    }

    .footer-links a {
      color: var(--color-white);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition-fast);
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-md);
    }

    .footer-links a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-1px);
    }

    /* =================================== 
       Mobile Responsive Breakpoints
       =================================== */
    
    /* Extra Small devices (phones, less than 576px) */
    @media (max-width: 575.98px) {
      .hero-title {
        font-size: var(--font-size-3xl);
      }
      
      .hero-subtitle {
        font-size: var(--font-size-lg);
      }
      
      .dishes-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-6);
      }
      
      .dish-header {
        padding: var(--spacing-4);
      }
      
      .dish-header h3 {
        font-size: var(--font-size-xl);
      }
      
      .dish-content {
        padding: var(--spacing-4);
      }
      
      .dish-image {
        width: 60px;
        height: 60px;
        float: none;
        margin: 0 0 var(--spacing-3) 0;
      }
      
      .section-title {
        font-size: var(--font-size-2xl);
        text-align: center;
        display: block;
      }
      
      .cart-section {
        padding: var(--spacing-4);
      }
      
      .navbar-brand {
        font-size: var(--font-size-xl);
      }
      
      .container-fluid {
        padding-right: var(--spacing-2);
        padding-left: var(--spacing-2);
      }
      
      .hero-section {
        padding: var(--spacing-8) 0 var(--spacing-6) 0;
        margin-bottom: var(--spacing-8);
      }
      
      .btn-primary-custom,
      .btn-secondary-custom {
        width: 100%;
        margin-bottom: var(--spacing-2);
      }
    }

    /* Small devices (landscape phones, 576px and up) */
    @media (min-width: 576px) and (max-width: 767.98px) {
      .dishes-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-6);
      }
      
      .hero-title {
        font-size: var(--font-size-4xl);
      }
    }

    /* Medium devices (tablets, 768px and up) */
    @media (min-width: 768px) and (max-width: 991.98px) {
      .dishes-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-6);
      }
      
      .dish-cards-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Large devices (desktops, 992px and up) */
    @media (min-width: 992px) {
      .dish-cards-grid {
        grid-template-columns: 1fr;
      }
      
      .dishes-grid {
        gap: var(--spacing-8);
      }
    }

    /* Extra large devices (large desktops, 1200px and up) */
    @media (min-width: 1200px) {
      .dishes-grid {
        gap: var(--spacing-10);
      }
      
      .container-fluid {
        max-width: 1200px;
        margin: 0 auto;
      }
    }

    /* =================================== 
       Touch Friendly for Mobile
       =================================== */
    @media (pointer: coarse) {
      .btn-primary-custom,
      .btn-secondary-custom {
        min-height: 48px;
        padding: var(--spacing-4) var(--spacing-6);
      }
      
      .dish-card {
        padding: var(--spacing-6);
      }
      
      .navbar-nav .nav-link {
        min-height: 44px;
        display: flex;
        align-items: center;
      }
    }

    /* =================================== 
       Loading Animations
       =================================== */
    .dish-container {
      animation: fadeInUp 0.6s ease-out;
    }

    .dish-container:nth-child(2) {
      animation-delay: 0.2s;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* =================================== 
       Accessibility Improvements
       =================================== */
    .btn-primary-custom:focus,
    .btn-secondary-custom:focus {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }

    .dish-card:focus-within {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 2px rgba(183, 28, 28, 0.2);
    }

    /* =================================== 
       Print Styles
       =================================== */
    @media print {
      .navbar,
      .hero-section,
      .footer {
        display: none;
      }
      
      .dish-container {
        box-shadow: none;
        border: 1px solid #000;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'main' %}">
        üçΩÔ∏è Familia Gastro
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" style="border: none; color: white;">
        <i class='bx bx-menu' style="font-size: 24px; color: white;"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'main' %}">üè† Inicio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#menu">üçΩÔ∏è Men√∫</a>
          </li>
          {% if user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'carrito' %}">üõí Carrito ({{ item_count }})</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'logout' %}">üëã Cerrar Sesi√≥n</a>
            </li>
            {% if user.is_staff %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:index' %}">‚öôÔ∏è Admin</a>
              </li>
            {% endif %}
          {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'login' %}">üîê Iniciar Sesi√≥n</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'registro' %}">üìù Registro</a>
            </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-container">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container-fluid">
        <div class="hero-content">
          <h1 class="hero-title">Bienvenido a Familia Gastro</h1>
          <p class="hero-subtitle">Descubre nuestro delicioso men√∫ semanal preparado con amor y los mejores ingredientes</p>
          <a href="#menu" class="btn-primary-custom">
            <i class='bx bx-restaurant'></i>
            Ver Men√∫ Semanal
          </a>
        </div>
      </div>
    </section>

    <!-- Menu Section -->
    <section id="menu" class="container-fluid">
      <div class="text-center mb-5">
        <h2 class="section-title">üçΩÔ∏è Men√∫ Semanal</h2>
        <p class="section-subtitle">
          Explora nuestros platos disponibles organizados por categor√≠as. 
          Cada plato est√° preparado con ingredientes frescos y recetas tradicionales.
        </p>
      </div>

      <!-- Two Dish Containers -->
      <div class="dishes-grid">
        <!-- Container 1: Platos Principales -->
        <div class="dish-container">
          <div class="dish-header">
            <div class="icon">üçñ</div>
            <h3>Platos Principales</h3>
          </div>
          <div class="dish-content">
            <div class="dish-cards-grid">
              {% for plato in platos_principales %}
                <div class="dish-card">
                  {% if plato.imagen %}
                    <img src="{{ plato.imagen.url }}" alt="{{ plato.nombre }}" class="dish-image">
                  {% endif %}
                  <div class="dish-name">{{ plato.nombre }}</div>
                  {% if plato.descripcion %}
                    <div class="dish-description">{{ plato.descripcion|truncatechars:100 }}</div>
                  {% endif %}
                  <div class="dish-price">‚Ç¨{{ plato.precio }}</div>
                  {% for disponibilidad in plato.disponibilidades.all %}
                    <span class="dish-day">{{ disponibilidad.get_dia_display }}</span>
                  {% endfor %}
                  <div class="mt-3">
                    {% if user.is_authenticated %}
                      <form method="post" action="{% url 'agregar_carrito' %}" class="d-inline">
                        {% csrf_token %}
                        <input type="hidden" name="plato_id" value="{{ plato.id }}">
                        <input type="hidden" name="cantidad" value="1">
                        <button type="submit" class="btn-primary-custom">
                          <i class='bx bx-cart-add'></i>
                          Agregar al Carrito
                        </button>
                      </form>
                    {% else %}
                      <a href="{% url 'login' %}" class="btn-secondary-custom">
                        <i class='bx bx-log-in'></i>
                        Inicia Sesi√≥n para Ordenar
                      </a>
                    {% endif %}
                  </div>
                </div>
              {% empty %}
                <div class="text-center py-5">
                  <i class='bx bx-dish' style="font-size: 4rem; color: var(--color-gray-400); margin-bottom: 1rem;"></i>
                  <p style="color: var(--color-gray-500);">No hay platos principales disponibles en este momento.</p>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- Container 2: Platos Complementarios -->
        <div class="dish-container">
          <div class="dish-header">
            <div class="icon">ü•ó</div>
            <h3>Complementarios</h3>
          </div>
          <div class="dish-content">
            <div class="dish-cards-grid">
              {% for plato in platos_complementarios %}
                <div class="dish-card">
                  {% if plato.imagen %}
                    <img src="{{ plato.imagen.url }}" alt="{{ plato.nombre }}" class="dish-image">
                  {% endif %}
                  <div class="dish-name">{{ plato.nombre }}</div>
                  {% if plato.descripcion %}
                    <div class="dish-description">{{ plato.descripcion|truncatechars:100 }}</div>
                  {% endif %}
                  <div class="dish-price">‚Ç¨{{ plato.precio }}</div>
                  {% for disponibilidad in plato.disponibilidades.all %}
                    <span class="dish-day">{{ disponibilidad.get_dia_display }}</span>
                  {% endfor %}
                  <div class="mt-3">
                    {% if user.is_authenticated %}
                      <form method="post" action="{% url 'agregar_carrito' %}" class="d-inline">
                        {% csrf_token %}
                        <input type="hidden" name="plato_id" value="{{ plato.id }}">
                        <input type="hidden" name="cantidad" value="1">
                        <button type="submit" class="btn-primary-custom">
                          <i class='bx bx-cart-add'></i>
                          Agregar al Carrito
                        </button>
                      </form>
                    {% else %}
                      <a href="{% url 'login' %}" class="btn-secondary-custom">
                        <i class='bx bx-log-in'></i>
                        Inicia Sesi√≥n para Ordenar
                      </a>
                    {% endif %}
                  </div>
                </div>
              {% empty %}
                <div class="text-center py-5">
                  <i class='bx bx-dish' style="font-size: 4rem; color: var(--color-gray-400); margin-bottom: 1rem;"></i>
                  <p style="color: var(--color-gray-500);">No hay platos complementarios disponibles en este momento.</p>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <!-- Cart Summary -->
      {% if user.is_authenticated and carrito_items %}
        <div class="cart-section">
          <h3 class="text-center mb-4" style="color: var(--color-primary); font-weight: 700;">üõí Tu Carrito</h3>
          {% for item in carrito_items %}
            <div class="cart-item">
              <div>
                <strong>{{ item.plato.nombre }}</strong>
                <small class="d-block text-muted">Cantidad: {{ item.cantidad }}</small>
              </div>
              <div>
                <span class="fw-bold" style="color: var(--color-primary);">‚Ç¨{{ item.subtotal }}</span>
                <a href="{% url 'eliminar_item' item.id %}" class="btn btn-sm btn-outline-danger ms-2">
                  <i class='bx bx-trash'></i>
                </a>
              </div>
            </div>
          {% endfor %}
          <div class="cart-total">
            <h4>Total: ‚Ç¨{{ total_carrito }}</h4>
            <a href="{% url 'carrito' %}" class="btn btn-light btn-lg mt-3">
              <i class='bx bx-credit-card'></i>
              Proceder al Pago
            </a>
          </div>
        </div>
      {% endif %}
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container-fluid">
      <div class="footer-content">
        <h4>üçΩÔ∏è Familia Gastro</h4>
        <p>Deliciosa comida casera preparada con amor y los mejores ingredientes. Tradici√≥n y sabor en cada plato.</p>
        <div class="footer-links">
          <a href="{% url 'main' %}">Inicio</a>
          <a href="#menu">Men√∫</a>
          {% if user.is_staff %}
            <a href="{% url 'admin:index' %}">Panel Admin</a>
          {% endif %}
          <a href="mailto:info@familiacastro.com">Contacto</a>
        </div>
        <p style="margin-bottom: 0; opacity: 0.6; font-size: var(--font-size-sm);">
          ¬© 2025 Familia Gastro. Todos los derechos reservados.
        </p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üçΩÔ∏è Familia Gastro - Sitio web cargado');
      
      // Smooth scroll para navegaci√≥n
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Animaci√≥n de aparici√≥n para las tarjetas de platos
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, observerOptions);
      
      document.querySelectorAll('.dish-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
      });
      
      // Feedback visual para botones de agregar al carrito
      document.querySelectorAll('button[type="submit"]').forEach(button => {
        button.addEventListener('click', function() {
          const originalText = this.innerHTML;
          this.innerHTML = '<i class="bx bx-check"></i> ¬°Agregado!';
          this.disabled = true;
          
          setTimeout(() => {
            this.innerHTML = originalText;
            this.disabled = false;
          }, 1500);
        });
      });
      
      // Auto-collapse navbar en m√≥viles al hacer click en un enlace
      const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
      const navbarCollapse = document.querySelector('.navbar-collapse');
      
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth < 992) {
            const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
              toggle: false
            });
            bsCollapse.hide();
          }
        });
      });
      
      // Indicador de carga para formularios
      document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', function() {
          const submitBtn = this.querySelector('button[type="submit"]');
          if (submitBtn) {
            submitBtn.innerHTML = '<i class="bx bx-loader bx-spin"></i> Procesando...';
            submitBtn.disabled = true;
          }
        });
      });
    });
  </script>
</body>
</html>